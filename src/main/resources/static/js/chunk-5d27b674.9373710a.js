(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d27b674"],{"1a49":function(e,t,r){var n=r("cf40");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("499e").default;i("13d50920",n,!0,{})},"26dc":function(e,t,r){"use strict";r.d(t,"f",function(){return a}),r.d(t,"a",function(){return l}),r.d(t,"c",function(){return o}),r.d(t,"e",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"d",function(){return c});var n=r("a27e"),i=r("e490");function a(e){return Object(n["a"])({url:i["a"]+"/singer/search",method:"post",data:e})}function l(e){return Object(n["a"])({url:i["a"]+"/singer/create",method:"post",data:e})}function o(e){return Object(n["a"])({url:i["a"]+"/singer/update",method:"post",data:e})}function s(e){return Object(n["a"])({url:i["a"]+"/singer/info",method:"post",data:e})}function u(e){return Object(n["a"])({url:i["a"]+"/singer/delete",method:"post",data:e})}function c(e){return Object(n["a"])({url:i["a"]+"/singer/list",method:"post",data:{}})}},"323e7":function(e,t,r){var n=r("9e7c");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("499e").default;i("3efe2934",n,!0,{})},"3e98":function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,"",""])},"459d":function(e,t,r){var n=r("3e98");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("499e").default;i("9212bf58",n,!0,{})},"78a9":function(e,t,r){"use strict";r.r(t);r("c5f6");var n=r("26dc"),i={data:function(){return{ruleForm:{},rules:{name:[{required:!0,message:"请输入歌手名称",trigger:"blur"}],birthday:[{required:!0,message:"请输入生日",trigger:"blur"}],description:[{required:!0,message:"请输入简介",trigger:"blur"}]}}},props:{addSingerFlag:Boolean},watch:{addSingerFlag:function(e){e&&this.$refs.ruleForm.resetFields()}},methods:{toSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&n["a"](e.ruleForm).then(function(t){0==t.errorCode&&(e.$message({showClose:!0,message:"添加成功！",type:"success"}),e.$emit("changeAddSingerFlag",!1))})})}}},a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"ruleForm",attrs:{size:"small",model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"歌手名称",prop:"name"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"头像图片路径",prop:"picturePath"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.picturePath,callback:function(t){e.$set(e.ruleForm,"picturePath",t)},expression:"ruleForm.picturePath"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"简介",prop:"description"}},[r("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:function(t){return e.$emit("changeAddSingerFlag",!1)}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.toSubmit}},[e._v("确 定")])],1)],1)},l=[],o=r("2455");function s(e){r("459d")}var u=!1,c=s,d=null,g=null,p=Object(o["a"])(i,a,l,u,c,d,g),m=p.exports,f={data:function(){return{ruleForm:{},rules:{name:[{required:!0,message:"请输入歌手名称",trigger:"blur"}],birthday:[{required:!0,message:"请输入生日",trigger:"blur"}],description:[{required:!0,message:"请输入简介",trigger:"blur"}]}}},props:{editSingerFlag:Boolean,editId:Number},mounted:function(){this.getSingerInfo()},watch:{editSingerFlag:function(e){e&&this.getSingerInfo()}},methods:{getSingerInfo:function(){var e=this;return new Promise(function(t,r){n["e"]({id:e.editId}).then(function(t){0==t.errorCode&&(e.ruleForm=t.data)})})},toSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&n["c"](e.ruleForm).then(function(t){0==t.errorCode&&(e.$message({showClose:!0,message:"编辑成功！",type:"success"}),e.$emit("changeEditSingerFlag",!1))})})}}},h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"ruleForm",attrs:{size:"small",model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"歌手名称",prop:"name"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"头像图片路径",prop:"picturePath"}},[r("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.picturePath,callback:function(t){e.$set(e.ruleForm,"picturePath",t)},expression:"ruleForm.picturePath"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"简介",prop:"description"}},[r("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:function(t){return e.$emit("changeEditSingerFlag",!1)}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.toSubmit}},[e._v("确 定")])],1)],1)},b=[];function v(e){r("1a49")}var F=!1,S=v,y=null,_=null,x=Object(o["a"])(f,h,b,F,S,y,_),w=x.exports,k={data:function(){return{page:{page:1,pageSize:10,total:1},loading:!1,addSingerFlag:!1,editSingerFlag:!1,editId:Number,tableData:[],searchForm:{}}},components:{addSinger:m,editSinger:w},mounted:function(){this.getSingerList()},methods:{getSingerList:function(){var e=this;return new Promise(function(t,r){var i=Object.assign({},e.page,e.searchForm);e.loading=!0,n["f"](i).then(function(r){0==r.errorCode&&(e.page.total=r.totalCount,e.tableData=r.data,e.loading=!1),t()})})},pageChange:function(e){this.page.page=e,this.getSingerList()},sizeChange:function(e){this.page.pageSize=e,this.getSingerList()},changeAddSingerFlag:function(e){this.addSingerFlag=e,this.getSingerList()},changeEditSingerFlag:function(e){this.editSingerFlag=e,this.getSingerList()},toSearch:function(){this.page.page=1,this.getSingerList()},toEdit:function(e){this.editId=e,this.editSingerFlag=!0},toDetail:function(e){this.$router.push({name:"singerDetail",query:{id:e}})},toDelete:function(e){var t=this;this.$confirm("是否删除该歌手?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n["b"]({id:e}).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.getSingerList()})})}}},$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fillcontain"},[r("el-form",{attrs:{inline:!0,size:"small"}},[r("el-form-item",{attrs:{label:"歌手名称"}},[r("el-input",{attrs:{clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),r("el-form-item",[r("el-button-group",[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.toSearch}},[e._v("查询")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.addSingerFlag=!0}}},[e._v("添加")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":"","header-cell-class-name":"table-header-class"}},[r("el-table-column",{attrs:{prop:"pictureUrl",label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticClass:"head_pic",attrs:{src:e.row.pictureUrl,width:"48",height:"32"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"birthday",label:"生日",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button-group",[r("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(r){return e.toDetail(t.row.id)}}},[e._v("详情")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(r){return e.toEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.toDelete(t.row.id)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),r("el-row",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper, sizes","page-size":e.page.pageSize,"page-sizes":[2,5,10,20,50,100],total:e.page.total},on:{"current-change":e.pageChange,"size-change":e.sizeChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加歌手","append-to-body":!0,visible:e.addSingerFlag,width:"500px"},on:{"update:visible":function(t){e.addSingerFlag=t}}},[r("add-singer",{attrs:{addSingerFlag:e.addSingerFlag},on:{changeAddSingerFlag:e.changeAddSingerFlag}})],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑歌手","append-to-body":!0,visible:e.editSingerFlag,width:"500px"},on:{"update:visible":function(t){e.editSingerFlag=t}}},[r("edit-singer",{attrs:{editSingerFlag:e.editSingerFlag,editId:e.editId},on:{changeEditSingerFlag:e.changeEditSingerFlag}})],1)],1)},z=[];function C(e){r("323e7")}var j=!1,E=C,O=null,P=null,I=Object(o["a"])(k,$,z,j,E,O,P);t["default"]=I.exports},"9e7c":function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,"\n.fillcontain {\n  height: calc(100vh - 180px);\n  padding: 30px;\n  overflow: auto;\n}\n.fillcontain .pagination {\n  margin-top: 10px;\n  text-align: right;\n}\n",""])},cf40:function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,"",""])}}]);